{% include 'user_header.html'%}
{% include 'user_navigation.html'%}
{% load static %}      
{% if user.is_authenticated %}

<div class="container mt-5 mb-5">
    <h3 class="mb-4 text-center">Welcome, {{ user.username }}!</h3>
    <h4 class="mb-4 text-center">My Registered Events</h4>
    <div class="row">
        {% if registered_events %}
            {% for reg in registered_events %}
            <div class="col-md-4 mb-4">
                <div class="card h-100">
                    {% if reg.event_name.image %}
                    <img src="{{ reg.event_name.image.url }}" class="card-img-top" alt="{{ reg.event_name.event_name }}" style="height: 250px; object-fit: cover;">
                    {% else %}
                    <img src="/media/photo.jpg" class="card-img-top" alt="No Image" style="height: 250px; object-fit: cover;">
                    {% endif %}
                    <div class="card-body">
                        <h5 class="card-title">{{ reg.event_name.event_name }}</h5>
                        <p class="card-text">
                            <strong>Date:</strong> {{ reg.event_name.event_date }}<br>
                            <strong>Time:</strong> {{ reg.event_name.event_time }}<br>
                            <strong>Location:</strong> {{ reg.event_name.location }}<br>
                            <strong>Description:</strong> {{ reg.event_name.description }}
                        </p>
                        <p class="text-muted">Registered at: {{ reg.registered_at }}</p>
                    </div>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <div class="col-12 text-center">
                <p>You have not registered for any events yet.</p>
            </div>
        {% endif %}
    </div>
</div>
{% else %}
<div class="container mt-5 mb-5">
    <h3 class="mb-4 text-center">Welcome to Event Planner!</h3>
    <div class="text-center">
        <a href="{% url 'login' %}" class="btn btn-primary me-2">Login</a>
        <a href="{% url 'register' %}" class="btn btn-success">Register</a>
    </div>
</div>
{% if registered %}
<script>
    alert("You've successfully registered the event");
</script>



{% endif %}
{% endif %}
{% include 'footer.html' %}